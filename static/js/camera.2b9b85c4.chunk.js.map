{"version":3,"sources":["pages/animations/fade-in.tsx","pages/animations/index.ts","pages/page-wrapper.tsx","components/icons.tsx","modules/client/actions.ts","components/camera-output/use-media-stream.ts","components/camera-output/use-take-picture-callback.ts","components/camera-output/desktop-media-stream-creator.ts","components/camera-output/mobile-media-stream-creator.ts","components/camera-output/styles.ts","components/camera-output/camera-output.tsx","pages/camera/styles.ts","pages/camera/layout.tsx","shared/use-window-size.ts"],"names":["fadeIn","keyframes","Animations","FadeIn","styled","div","props","duration","PageWrapper","children","style","width","height","Icon","type","icon","BackIcon","faChevronLeft","CantDisplayIcon","faEyeSlash","CameraIcon","faCamera","changeStage","createAsyncThunk","arg","thunkAPI","setTimeout","dispatch","clientSlice","actions","stage","ms","setSnapshot","snapshot","nextStage","createMediaStream","creators","config","a","creator","console","error","lastError","takePictureFromVideo","options","video","canvas","document","createElement","context","getContext","drawImage","canvasToBlob","Promise","resolve","toBlob","blob","desktopMediaStreamCreator","navigator","mediaDevices","getUserMedia","facingMode","exact","stream","needToFlip","mobileMediaStreamCreator","horizontalMobileMediaStreamCreator","Container","Video","flip","Error","PhotoButtons","LeftPhotoButton","PhotoButtonContainer","disabled","LoadPhotoInput","input","CameraOutput","takeSnapshotElement","loadPhotoElement","onLoadPhoto","videoRef","React","mediaStreamCreators","setStream","setError","then","catch","Object","values","useMediaStream","descriptor","current","srcObject","takePicture","handleClick","picture","ref","autoPlay","onLoad","onClick","LoadPhotoButton","handleChange","event","file","currentTarget","files","item","Blob","arrayBuffer","htmlFor","id","onChange","LoadButtonContainer","PhotoButton","Layout","useDispatch","handleLoadPhoto","photo","useState","window","innerWidth","setWidth","innerHeight","setHeight","useEffect","handler","addEventListener","removeEventListener","useWindowSize"],"mappings":"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","file":"static/js/camera.2b9b85c4.chunk.js","sourcesContent":["import styled, { keyframes } from \"styled-components\";\n\nconst fadeIn = keyframes`\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n`;\n\ntype FadeInProps = {\n    duration: number;\n};\n\nexport const FadeIn = styled.div<FadeInProps>`\n    animation: ${fadeIn} ${(props) => props.duration}s linear 1;\n`;\n","import { FadeIn } from \"pages/animations/fade-in\";\n\nexport const Animations = {\n    FadeIn,\n};\n","import { Animations } from \"pages/animations\";\nimport * as React from \"react\";\n\nexport const PageWrapper: React.FC = ({ children }) => {\n    return (\n        <Animations.FadeIn\n            duration={1}\n            style={{\n                width: \"100%\",\n                height: \"100%\",\n            }}\n        >\n            {children}\n        </Animations.FadeIn>\n    );\n};\n","import { IconName } from \"@fortawesome/fontawesome-common-types\";\nimport { IconDefinition } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n    faCamera,\n    faChevronLeft,\n    faEyeSlash,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\n\ntype IconProps = {\n    type: IconName | IconDefinition;\n};\n\nexport const Icon: React.FC<IconProps> = ({ type }) => {\n    return <FontAwesomeIcon icon={type} />;\n};\n\nexport const BackIcon = () => <Icon type={faChevronLeft} />;\n\nexport const CantDisplayIcon = () => <Icon type={faEyeSlash} />;\n\nexport const CameraIcon = () => <Icon type={faCamera} />;\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { AppStage, clientSlice, Snapshot } from \"modules/client/slice\";\n\ntype ChangeStageArg = {\n    ms: number;\n    stage: AppStage;\n};\n\nexport const changeStage = createAsyncThunk<void, ChangeStageArg>(\n    \"client/change-stage\",\n    (arg, thunkAPI) => {\n        setTimeout(() => {\n            setTimeout(() => {\n                thunkAPI.dispatch(clientSlice.actions.changeStage(arg.stage));\n            }, arg.ms);\n        });\n    }\n);\n\ntype SetSnapshotArg = {\n    snapshot: Snapshot;\n    nextStage: AppStage;\n};\n\nexport const setSnapshot = createAsyncThunk<void, SetSnapshotArg>(\n    \"client/set-sbapshot\",\n    ({ snapshot, nextStage }, thunkAPI) => {\n        thunkAPI.dispatch(clientSlice.actions.setSnapshot(snapshot));\n        thunkAPI.dispatch(changeStage({ stage: nextStage, ms: 0 }));\n    }\n);\n","import * as React from \"react\";\n\nexport type MediaStreamConfig = {\n    width: number;\n    height: number;\n};\n\nexport type MediaStreamDescriptor = {\n    stream: MediaStream | null;\n    needToFlip?: boolean;\n};\n\nexport type MediaStreamCreator = (\n    config: MediaStreamConfig\n) => Promise<MediaStreamDescriptor> | null;\n\nexport const useMediaStream = (\n    mediaStreamCreators: MediaStreamCreator[],\n    config: MediaStreamConfig\n): [MediaStreamDescriptor | null, string | undefined] => {\n    const [stream, setStream] = React.useState<MediaStreamDescriptor | null>(\n        null\n    );\n    const [error, setError] = React.useState<string>();\n\n    React.useEffect(() => {\n        createMediaStream(mediaStreamCreators, config)\n            .then((stream) => stream && setStream(stream))\n            .catch((error) => setError(error));\n        // eslint-disable-next-line\n    }, [setStream, setError, ...Object.values(config), ...mediaStreamCreators]);\n\n    return [stream, error];\n};\n\nconst createMediaStream = async (\n    creators: MediaStreamCreator[],\n    config: MediaStreamConfig\n) => {\n    let lastError;\n\n    for (const creator of creators) {\n        try {\n            return await creator(config);\n        } catch (error) {\n            console.error(\"MediaStreamCreator\", error);\n\n            lastError = error;\n        }\n    }\n\n    throw lastError;\n};\n","import * as React from \"react\";\n\ntype UseTakePictureCallbackProps = {\n    video: HTMLVideoElement | null;\n    width: number;\n    height: number;\n};\n\nexport const useTakePictureCallback = (\n    options: UseTakePictureCallbackProps\n) => {\n    return React.useCallback(() => {\n        return takePictureFromVideo(options);\n    }, [options]);\n};\n\ntype TakePictureFromVideoProps = UseTakePictureCallbackProps;\n\nconst takePictureFromVideo = async (options: TakePictureFromVideoProps) => {\n    if (options.video == null) {\n        return null;\n    }\n\n    const canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n\n    if (context == null) {\n        return null;\n    }\n\n    canvas.width = options.width;\n    canvas.height = options.height;\n\n    context.drawImage(options.video, 0, 0, options.width, options.height);\n\n    return await canvasToBlob(canvas);\n};\n\nconst canvasToBlob = (canvas: HTMLCanvasElement) => {\n    return new Promise<Blob | null>((resolve) => {\n        canvas.toBlob((blob) => resolve(blob));\n    });\n};\n","import { MediaStreamCreator } from \"./use-media-stream\";\n\nexport const desktopMediaStreamCreator: MediaStreamCreator = async (config) => {\n    const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n            facingMode: { exact: \"user\" },\n            width: config.width,\n            height: config.height,\n        },\n    });\n\n    return {\n        stream,\n        needToFlip: true,\n    };\n};\n","// noinspection JSSuspiciousNameCombination\n\nimport { MediaStreamCreator } from \"./use-media-stream\";\n\nexport const mobileMediaStreamCreator: MediaStreamCreator = async (config) => {\n    const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n            facingMode: { exact: \"environment\" },\n            width: config.height,\n            height: config.width,\n        },\n    });\n\n    return {\n        stream,\n    };\n};\n\nexport const horizontalMobileMediaStreamCreator: MediaStreamCreator = async (\n    config\n) => {\n    const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n            facingMode: { exact: \"environment\" },\n            width: config.width,\n            height: config.height,\n        },\n    });\n\n    return {\n        stream,\n    };\n};\n","import styled from \"styled-components\";\n\ntype ContainerProps = {\n    width: number;\n    height: number;\n};\n\nexport const Container = styled.div<ContainerProps>`\n    position: relative;\n    width: ${({ width }) => width}px;\n    height: ${({ height }) => height}px;\n    background-color: black;\n`;\n\ntype VideoProps = {\n    flip: boolean;\n};\n\nexport const Video = styled.video<VideoProps>`\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transform: scaleX(${({ flip }) => (flip ? \"-1\" : \"1\")});\n`;\n\nexport const Error = styled.div`\n    color: white;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    pointer-events: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 50px;\n`;\n\nexport const PhotoButtons = styled.div`\n    width: 100%;\n    position: absolute;\n    bottom: 50px;\n    display: grid;\n\n    grid-template-areas: \"left center right\";\n`;\n\nexport const LeftPhotoButton = styled.div`\n    grid-area: left;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n`;\n\ntype PhotoButtonContainerProps = {\n    disabled?: boolean;\n};\n\nexport const PhotoButtonContainer = styled.div<PhotoButtonContainerProps>`\n    grid-area: center;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: ${({ disabled }) => (disabled ? 0.5 : 1)};\n    pointer-events: ${({ disabled }) => (disabled ? \"none\" : \"auto\")};\n`;\n\nexport const LoadPhotoInput = styled.input`\n    display: none;\n`;\n","import { useMediaStream } from \"components/camera-output/use-media-stream\";\nimport { useTakePictureCallback } from \"components/camera-output/use-take-picture-callback\";\nimport { CantDisplayIcon } from \"components/icons\";\nimport * as React from \"react\";\nimport { desktopMediaStreamCreator } from \"./desktop-media-stream-creator\";\nimport {\n    horizontalMobileMediaStreamCreator,\n    mobileMediaStreamCreator,\n} from \"./mobile-media-stream-creator\";\nimport {\n    Container,\n    Error,\n    LeftPhotoButton,\n    LoadPhotoInput,\n    PhotoButtonContainer,\n    PhotoButtons,\n    Video,\n} from \"./styles\";\n\ntype CameraOutputProps = {\n    width: number;\n    height: number;\n    takeSnapshotElement: React.ReactElement;\n    loadPhotoElement: React.ReactElement;\n    onLoadPhoto: (snapshot: Blob) => void;\n};\n\nexport const CameraOutput: React.FC<CameraOutputProps> = ({\n    height,\n    width,\n    takeSnapshotElement,\n    loadPhotoElement,\n    onLoadPhoto,\n}) => {\n    const videoRef = React.useRef<HTMLVideoElement>(null);\n\n    const [descriptor, error] = useMediaStream(\n        [\n            mobileMediaStreamCreator,\n            horizontalMobileMediaStreamCreator,\n            desktopMediaStreamCreator,\n        ],\n        { height, width }\n    );\n\n    React.useEffect(() => {\n        if (videoRef.current && descriptor) {\n            videoRef.current.srcObject = descriptor.stream;\n        }\n    }, [descriptor]);\n\n    const takePicture = useTakePictureCallback({\n        video: videoRef.current,\n        width,\n        height,\n    });\n\n    const handleClick = React.useCallback(async () => {\n        const picture = await takePicture();\n\n        if (picture) {\n            onLoadPhoto(picture);\n        }\n    }, [takePicture, onLoadPhoto]);\n\n    return (\n        <Container width={width} height={height}>\n            <Video ref={videoRef} flip={!!descriptor?.needToFlip} autoPlay />\n\n            {error && (\n                <Error>\n                    <CantDisplayIcon />\n                </Error>\n            )}\n\n            <PhotoButtons>\n                <LoadPhotoButton onLoad={onLoadPhoto}>\n                    {loadPhotoElement}\n                </LoadPhotoButton>\n\n                <PhotoButtonContainer\n                    onClick={handleClick}\n                    disabled={!descriptor || !!error}\n                >\n                    {takeSnapshotElement}\n                </PhotoButtonContainer>\n            </PhotoButtons>\n        </Container>\n    );\n};\n\ntype LoadPhotoButtonProps = {\n    onLoad: (photo: Blob) => void;\n};\n\nconst LoadPhotoButton: React.FC<LoadPhotoButtonProps> = ({\n    children,\n    onLoad,\n}) => {\n    const handleChange = React.useCallback(\n        async (event: React.ChangeEvent<HTMLInputElement>) => {\n            const file = event.currentTarget.files?.item(0);\n\n            if (file) {\n                const blob = new Blob([await file.arrayBuffer()]);\n\n                onLoad(blob);\n            }\n        },\n        [onLoad]\n    );\n\n    return (\n        <LeftPhotoButton>\n            <label htmlFor={\"photo\"}>{children}</label>\n            <LoadPhotoInput\n                type={\"file\"}\n                id={\"photo\"}\n                onChange={handleChange}\n            />\n        </LeftPhotoButton>\n    );\n};\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n`;\n\nexport const PhotoButtonContainer = styled.div`\n    --size: 70px;\n\n    background-color: white;\n    width: var(--size);\n    height: var(--size);\n    border-radius: calc(var(--size) / 2);\n\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n\n    &:active {\n        opacity: 0.8;\n    }\n`;\n\nexport const LoadButtonContainer = styled.div`\n    color: white;\n    font-size: 25px;\n`;\n","import { CameraOutput } from \"components/camera-output\";\nimport { CameraIcon } from \"components/icons\";\nimport { setSnapshot } from \"modules/client/actions\";\nimport {\n    Container,\n    PhotoButtonContainer,\n    LoadButtonContainer,\n} from \"pages/camera/styles\";\nimport { PageWrapper } from \"pages/page-wrapper\";\nimport * as React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useWindowSize } from \"../../shared/use-window-size\";\n\nconst Layout: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const handleLoadPhoto = React.useCallback(\n        (photo: Blob) => {\n            dispatch(\n                setSnapshot({\n                    snapshot: photo,\n                    nextStage: \"prediction\",\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    const [width, height] = useWindowSize();\n\n    return (\n        <PageWrapper>\n            <Container>\n                <CameraOutput\n                    width={width}\n                    height={height}\n                    takeSnapshotElement={<PhotoButton />}\n                    loadPhotoElement={<LoadPhotoButton />}\n                    onLoadPhoto={handleLoadPhoto}\n                />\n            </Container>\n        </PageWrapper>\n    );\n};\n\nconst PhotoButton: React.FC = () => {\n    return <PhotoButtonContainer />;\n};\n\nconst LoadPhotoButton: React.FC = () => {\n    return (\n        <LoadButtonContainer>\n            <CameraIcon />\n        </LoadButtonContainer>\n    );\n};\n\nexport default Layout;\n","import React from \"react\";\n\nexport const useWindowSize = () => {\n    const [width, setWidth] = React.useState(window.innerWidth);\n    const [height, setHeight] = React.useState(window.innerHeight);\n\n    React.useEffect(() => {\n        const handler = () => {\n            setWidth(window.innerWidth);\n            setHeight(window.innerHeight);\n        };\n\n        window.addEventListener(\"resize\", handler);\n\n        return () => window.removeEventListener(\"resize\", handler);\n    }, [setWidth, setHeight]);\n\n    return [width, height];\n};\n"],"sourceRoot":""}