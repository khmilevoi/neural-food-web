(this["webpackJsonpneural-food-web"]=this["webpackJsonpneural-food-web"]||[]).push([[1],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,i,a=n(10),c=n(11),o=Object(c.c)(r||(r=Object(a.a)(["\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n"]))),u={FadeIn:c.b.div(i||(i=Object(a.a)(["\n    animation: "," ","s linear 1;\n"])),o,(function(e){return e.duration}))},s=(n(0),n(1)),d=function(e){var t=e.children;return Object(s.jsx)(u.FadeIn,{duration:1,style:{width:"100%",height:"100%"},children:t})}},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(220),i=n(218),a=(n(0),n(1)),c=function(e){var t=e.type;return Object(a.jsx)(i.a,{icon:t})},o=function(){return Object(a.jsx)(c,{type:r.b})},u=function(){return Object(a.jsx)(c,{type:r.c})},s=function(){return Object(a.jsx)(c,{type:r.a})}},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(2),i=n(5),a=Object(r.b)("client/change-stage",(function(e,t){setTimeout((function(){setTimeout((function(){t.dispatch(i.a.actions.changeStage(e.stage))}),e.ms)}))})),c=Object(r.b)("client/set-sbapshot",(function(e,t){var n=e.snapshot,r=e.nextStage;t.dispatch(i.a.actions.setSnapshot(n)),t.dispatch(a({stage:r,ms:0}))}))},339:function(e,t,n){"use strict";n.r(t);var r,i,a,c,o,u,s,d,h,b,f=n(37),l=n(44),p=n.n(l),j=n(45),v=n(54),x=n(49),w=n(0),O=n.n(w),g=function(){var e=Object(j.a)(p.a.mark((function e(t,n){var r,i,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(v.a)(t),e.prev=1,i.s();case 3:if((a=i.n()).done){e.next=17;break}return c=a.value,e.prev=5,e.next=8,c(n);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),console.error("MediaStreamCreator",e.t0),r=e.t0;case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),i.e(e.t1);case 22:return e.prev=22,i.f(),e.finish(22);case 25:throw r;case 26:case"end":return e.stop()}}),e,null,[[1,19,22,25],[5,11]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.video){e.next=2;break}return e.abrupt("return",null);case 2:if(n=document.createElement("canvas"),null!=(r=n.getContext("2d"))){e.next=6;break}return e.abrupt("return",null);case 6:return n.width=t.width,n.height=t.height,r.drawImage(t.video,0,0,t.width,t.height),e.next=11,y(n);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return new Promise((function(t){e.toBlob((function(e){return t(e)}))}))},k=n(136),S=n(10),E=n(11),z=E.b.div(r||(r=Object(S.a)(["\n    position: relative;\n    width: ","px;\n    height: ","px;\n    background-color: black;\n"])),(function(e){return e.width}),(function(e){return e.height})),C=E.b.video(i||(i=Object(S.a)(["\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transform: scaleX(",");\n"])),(function(e){return e.flip?"-1":"1"})),L=E.b.div(a||(a=Object(S.a)(["\n    color: white;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    pointer-events: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 50px;\n"]))),P=E.b.div(c||(c=Object(S.a)(['\n    width: 100%;\n    position: absolute;\n    bottom: 50px;\n    display: grid;\n\n    grid-template-areas: "left center right";\n']))),F=E.b.div(o||(o=Object(S.a)(["\n    grid-area: left;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n"]))),M=E.b.div(u||(u=Object(S.a)(["\n    grid-area: center;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: ",";\n    pointer-events: ",";\n"])),(function(e){return e.disabled?.5:1}),(function(e){return e.disabled?"none":"auto"})),T=E.b.input(s||(s=Object(S.a)(["\n    display: none;\n"]))),B=function(){var e=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:t.height,height:t.width}});case 2:return n=e.sent,e.abrupt("return",{stream:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"user"},width:t.width,height:t.height}});case 2:return n=e.sent,e.abrupt("return",{stream:n,needToFlip:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=n(1),H=function(e){var t=e.height,n=e.width,r=e.takeSnapshotElement,i=e.loadPhotoElement,a=e.onLoadPhoto,c=w.useRef(null),o=function(e,t){var n=w.useState(null),r=Object(f.a)(n,2),i=r[0],a=r[1],c=w.useState(),o=Object(f.a)(c,2),u=o[0],s=o[1];return w.useEffect((function(){g(e,t).then((function(e){return e&&a(e)})).catch((function(e){return s(e)}))}),[a,s].concat(Object(x.a)(Object.values(t)),Object(x.a)(e))),[i,u]}([B,I],{height:t,width:n}),u=Object(f.a)(o,2),s=u[0],d=u[1];w.useEffect((function(){c.current&&s&&(c.current.srcObject=s.stream)}),[s]);var h,b=(h={video:c.current,width:n,height:t},w.useCallback((function(){return m(h)}),[h])),l=w.useCallback(Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)}))),[b,a]);return Object(D.jsxs)(z,{width:n,height:t,children:[Object(D.jsx)(C,{ref:c,flip:!!(null===s||void 0===s?void 0:s.needToFlip),autoPlay:!0}),d&&Object(D.jsx)(L,{children:Object(D.jsx)(k.c,{})}),Object(D.jsxs)(P,{children:[Object(D.jsx)(J,{onLoad:a,children:i}),Object(D.jsx)(M,{onClick:l,disabled:!s||!!d,children:r})]})]})},J=function(e){var t=e.children,n=e.onLoad,r=w.useCallback(function(){var e=Object(j.a)(p.a.mark((function e(t){var r,i,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(r=t.currentTarget.files)||void 0===r?void 0:r.item(0))){e.next=9;break}return e.t0=Blob,e.next=5,i.arrayBuffer();case 5:e.t1=e.sent,e.t2=[e.t1],a=new e.t0(e.t2),n(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]);return Object(D.jsxs)(F,{children:[Object(D.jsx)("label",{htmlFor:"photo",children:t}),Object(D.jsx)(T,{type:"file",id:"photo",onChange:r})]})},U=n(137),W=E.b.div(d||(d=Object(S.a)(["\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n"]))),R=E.b.div(h||(h=Object(S.a)(["\n    --size: 70px;\n\n    background-color: white;\n    width: var(--size);\n    height: var(--size);\n    border-radius: calc(var(--size) / 2);\n\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n\n    &:active {\n        opacity: 0.8;\n    }\n"]))),X=E.b.div(b||(b=Object(S.a)(["\n    color: white;\n    font-size: 25px;\n"]))),q=n(114),A=n(3),G=function(){return Object(D.jsx)(R,{})},K=function(){return Object(D.jsx)(X,{children:Object(D.jsx)(k.b,{})})};t.default=function(){var e=Object(A.b)(),t=w.useCallback((function(t){e(Object(U.b)({snapshot:t,nextStage:"prediction"}))}),[e]),n=function(){var e=O.a.useState(window.innerWidth),t=Object(f.a)(e,2),n=t[0],r=t[1],i=O.a.useState(window.innerHeight),a=Object(f.a)(i,2),c=a[0],o=a[1];return O.a.useEffect((function(){var e=function(){r(window.innerWidth),o(window.innerHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r,o]),[n,c]}(),r=Object(f.a)(n,2),i=r[0],a=r[1];return Object(D.jsx)(q.a,{children:Object(D.jsx)(W,{children:Object(D.jsx)(H,{width:i,height:a,takeSnapshotElement:Object(D.jsx)(G,{}),loadPhotoElement:Object(D.jsx)(K,{}),onLoadPhoto:t})})})}}}]);
//# sourceMappingURL=camera.28c5b9d3.chunk.js.map