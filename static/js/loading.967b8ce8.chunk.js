(this["webpackJsonpneural-food-web"]=this["webpackJsonpneural-food-web"]||[]).push([[3],{114:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r,c,a=n(10),i=n(11),s=Object(i.c)(r||(r=Object(a.a)(["\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n"]))),o={FadeIn:i.b.div(c||(c=Object(a.a)(["\n    animation: "," ","s linear 1;\n"])),s,(function(t){return t.duration}))},u=(n(0),n(1)),l=function(t){var e=t.children;return Object(u.jsx)(o.FadeIn,{duration:1,style:{width:"100%",height:"100%"},children:e})}},136:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return u}));var r=n(219),c=n(217),a=(n(0),n(1)),i=function(t){var e=t.type;return Object(a.jsx)(c.a,{icon:e})},s=function(){return Object(a.jsx)(i,{type:r.b})},o=function(){return Object(a.jsx)(i,{type:r.c})},u=function(){return Object(a.jsx)(i,{type:r.a})}},137:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n(2),c=n(5),a=Object(r.b)("client/change-stage",(function(t,e){setTimeout((function(){setTimeout((function(){e.dispatch(c.a.actions.changeStage(t.stage))}),t.ms)}))})),i=Object(r.b)("client/set-sbapshot",(function(t,e){var n=t.snapshot,r=t.nextStage;e.dispatch(c.a.actions.setSnapshot(n)),e.dispatch(a({stage:r,ms:0}))}))},273:function(t,e){},274:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(50),c=n(44),a=n.n(c),i=n(45),s=n(37),o=n(275),u=n(0),l=function(t,e,n){var r=u.useState([]),c=Object(s.a)(r,2),o=c[0],l=c[1];return u.useEffect((function(){(function(){var r=Object(i.a)(a.a.mark((function r(){var c,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=t&&null!=e&&null!=n){r.next=2;break}return r.abrupt("return",[]);case 2:return r.next=4,d(e,t);case 4:c=r.sent,i=c.map((function(t,e){return{accuracy:t,label:n[e]}})),l(i.sort((function(t,e){return e.accuracy-t.accuracy})));case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}})()().catch()}),[t,e,l,n]),o},d=function(){var t=Object(i.a)(a.a.mark((function t(e,n){var c,i,s,u,l,d,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e);case 2:return c=t.sent,t.next=5,o.a.fromPixelsAsync(c);case 5:return i=t.sent,s=i.resizeNearestNeighbor([299,299]).toFloat().div(127.5).add(-1).expandDims(0),t.next=9,n.predict(s);case 9:if(u=t.sent,!Array.isArray(u)){t.next=17;break}return l=u.map((function(t){return t.data()})),t.next=14,Promise.all(l);case 14:return d=t.sent,f=d.map((function(t){return Array.from(t)})),t.abrupt("return",f.reduce((function(t,e){return[].concat(Object(r.a)(t),Object(r.a)(e))})));case 17:return t.t0=Array,t.next=20,u.data();case 20:return t.t1=t.sent,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 22:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),b=function(t){var e=document.createElement("img");return e.src=URL.createObjectURL(t),new Promise((function(t){e.onload=function(){t(e)}}))}},303:function(t,e){},304:function(t,e){},312:function(t,e){},333:function(t,e){},334:function(t,e){},337:function(t,e,n){"use strict";var r=n(273);n.o(r,"usePredictions")&&n.d(e,"usePredictions",(function(){return r.usePredictions}));var c=n(274);n.d(e,"usePredictions",(function(){return c.a}))},339:function(t,e,n){"use strict";n.r(e);var r=n(13),c=n(44),a=n.n(c),i=n(45),s=n(2),o=n(12),u=n(137),l=n(39),d=n(281),b=n.n(d),f=n(275),j={endpoint:"https://neural-food-api.herokuapp.com/"},h=function(t){return new URL(t,j.endpoint).href},p={model:h("/model/model.json"),labels:h("/labels")},x=function t(e){return Object(l.a)(this,t),f.c.l1l2(e)};x.className="L2",f.d.registerClass(x);var O,v,m,g,y={model:function(t){return f.b(p.model,{onProgress:function(e){return t(100*e)}})},labels:function(){var t=Object(i.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(p.labels,{cancelToken:n,onDownloadProgress:function(t){return e(100*t.loaded/t.total)}});case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},w=Object(s.b)("loader/load-model",function(){var t=Object(i.a)(a.a.mark((function t(e,n){var c,i,s,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e.entity,i=e.nextStage,n.dispatch(r.a.actions.changeStatus("progress")),s=function(t){n.dispatch(r.a.actions.setProgress(Math.floor(t)))},t.prev=3,"model"!==c){t.next=9;break}return t.next=7,y.model(s);case 7:l=t.sent,n.dispatch(o.clientSlice.actions.setModel(l));case 9:if("labels"!==c){t.next=14;break}return t.next=12,y.labels(s);case 12:d=t.sent,n.dispatch(o.clientSlice.actions.setLabels(d));case 14:n.dispatch(r.a.actions.changeStatus("default")),n.dispatch(Object(u.a)({stage:i,ms:1e3})),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(3),console.error("Load data: ",t.t0),n.dispatch(o.clientSlice.actions.setError(t.t0)),n.dispatch(Object(u.a)({stage:"error",ms:0}));case 23:case"end":return t.stop()}}),t,null,[[3,18]])})));return function(e,n){return t.apply(this,arguments)}}()),k=n(10),S=n(11),P=S.b.div(O||(O=Object(k.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]))),L=S.b.div(v||(v=Object(k.a)([""]))),C=S.b.div(m||(m=Object(k.a)(["\n    width: 100px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]))),E=S.b.span(g||(g=Object(k.a)(["\n    margin-top: 10px;\n"]))),T=n(0),A=n(335),R=(n(336),n(3)),F=n(1),M=function(t){var e=t.action,n=t.title,c=Object(R.b)();T.useEffect((function(){c(e())}),[c,e]);var a=Object(r.b)();return Object(F.jsx)(L,{children:Object(F.jsxs)(C,{children:[Object(F.jsx)(A.a,{value:a.progress,text:"".concat(a.progress,"%")}),Object(F.jsx)(E,{children:n})]})})},U=n(114),z={"load-model":function(){return w({entity:"model",nextStage:"load-labels"})},"load-labels":function(){return w({entity:"labels",nextStage:"camera"})}},H={"load-model":"Load model","load-labels":"Load labels"};e.default=function(t){var e=t.stage,n=Object(R.b)();return T.useEffect((function(){n(r.a.actions.setProgress(0))}),[n,e]),Object(F.jsx)(U.a,{children:Object(F.jsx)(P,{children:Object(F.jsx)(M,{action:z[e],title:H[e]})})})}},341:function(t,e,n){"use strict";n.r(e);var r,c,a,i,s,o,u,l,d,b,f,j,h,p=n(136),x=n(37),O=n(0),v=function(t,e,n){return t<e?e:t>n?n:t},m=n(10),g=n(11),y=g.b.div(r||(r=Object(m.a)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    transition: 0.1s;\n"]))),w=g.b.div(c||(c=Object(m.a)(["\n    height: ","px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 99999px 99999px 0 0;\n    background-color: white;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n"])),(function(t){return t.height})),k=g.b.div(a||(a=Object(m.a)(["\n    width: 50px;\n    height: 5px;\n    border-radius: 99999px;\n    background-color: silver;\n    cursor: pointer;\n"]))),S=g.b.div(i||(i=Object(m.a)(["\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    height: calc(100% - ","px);\n    overflow-y: auto;\n    padding-top: 15px;\n"])),(function(t){return t.header})),P=n(1),L=function(t){var e=t.containerHeight,n=t.children,r=O.useRef(null),c=function(t,e){var n=O.useState("default"),r=Object(x.a)(n,2),c=r[0],a=r[1],i=O.useState(t),s=Object(x.a)(i,2),o=s[0],u=s[1],l=O.useCallback((function(){a("start")}),[a]),d=O.useCallback((function(){var n=Math.abs(e-o),r=Math.abs(t-o);n<r&&u(e),r<n&&u(t),a("default")}),[o,u,a,e,t]),b=O.useCallback((function(n){a("move");var r=n.targetTouches.item(0),c=e-v(r.pageY,0,e-t);u(c)}),[a,u,e,t]);return[O.useCallback((function(t){switch(t){case"move":return b;case"end":return d;case"start":return l}}),[l,b,d]),o,c]}(355,e),a=Object(x.a)(c,2),i=a[0],s=a[1];return O.useEffect((function(){r.current&&(r.current.style.top="calc(100% - ".concat(s,"px)"))}),[s,r]),Object(P.jsxs)(y,{ref:r,children:[Object(P.jsx)(w,{height:55,onTouchStart:i("start"),onTouchEnd:i("end"),onTouchMove:i("move"),children:Object(P.jsx)(k,{})}),Object(P.jsx)(S,{header:55,children:n})]})},C=n(12),E=n(137),T=n(337),A=n(114),R=n(3),F=g.b.div(s||(s=Object(m.a)(["\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n"]))),M=g.b.div(o||(o=Object(m.a)(["\n    position: absolute;\n    top: 20px;\n    left: 15px;\n    color: white;\n    z-index: 1000;\n    font-size: 30px;\n"]))),U=g.b.img(u||(u=Object(m.a)(["\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n"]))),z=g.b.div(l||(l=Object(m.a)(["\n    display: flex;\n    position: relative;\n"]))),H=g.b.img(d||(d=Object(m.a)(["\n    width: 40%;\n    height: 100px;\n    object-fit: cover;\n"]))),N=g.b.div(b||(b=Object(m.a)(["\n    padding: 0 15px;\n"]))),D=g.b.div(f||(f=Object(m.a)(["\n    font-size: 20px;\n"]))),I=g.b.div(j||(j=Object(m.a)(["\n    color: silver;\n"]))),J=g.b.div(h||(h=Object(m.a)([""]))),Y=function(t){var e=t.list;return Object(P.jsx)(P.Fragment,{children:e.map((function(t){return Object(P.jsxs)(z,{children:[Object(P.jsx)(H,{src:t.label.image}),Object(P.jsxs)(N,{children:[Object(P.jsx)(J,{children:Object(P.jsx)(D,{children:t.label.title})}),Object(P.jsx)(J,{children:Object(P.jsxs)(I,{children:["Accuracy: ",(100*t.accuracy).toFixed(3),"%"]})})]})]},t.label.title)}))})};e.default=function(){var t=C.useClient(),e=T.usePredictions(t.model,t.snapshot,t.labels),n=Object(R.b)(),r=O.useCallback((function(){n(Object(E.a)({stage:"camera",ms:0}))}),[n]);return null==t.snapshot||null==t.model?null:Object(P.jsx)(A.a,{children:Object(P.jsxs)(F,{children:[Object(P.jsx)(M,{onClick:r,children:Object(P.jsx)(p.a,{})}),Object(P.jsx)(U,{src:URL.createObjectURL(t.snapshot)}),Object(P.jsx)(L,{containerHeight:window.innerHeight,children:Object(P.jsx)(Y,{list:e})})]})})}}}]);
//# sourceMappingURL=loading.967b8ce8.chunk.js.map