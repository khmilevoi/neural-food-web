(this["webpackJsonpneural-food-web"]=this["webpackJsonpneural-food-web"]||[]).push([[1],{114:function(n,t,e){"use strict";e.d(t,"a",(function(){return d}));var i,r,a=e(10),c=e(11),o=Object(c.c)(i||(i=Object(a.a)(["\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n"]))),u={FadeIn:c.b.div(r||(r=Object(a.a)(["\n    animation: "," ","s linear 1;\n"])),o,(function(n){return n.duration}))},s=(e(0),e(1)),d=function(n){var t=n.children;return Object(s.jsx)(u.FadeIn,{duration:1,style:{width:"100%",height:"100%"},children:t})}},136:function(n,t,e){"use strict";e.d(t,"a",(function(){return o})),e.d(t,"c",(function(){return u})),e.d(t,"b",(function(){return s}));var i=e(219),r=e(217),a=(e(0),e(1)),c=function(n){var t=n.type;return Object(a.jsx)(r.a,{icon:t})},o=function(){return Object(a.jsx)(c,{type:i.b})},u=function(){return Object(a.jsx)(c,{type:i.c})},s=function(){return Object(a.jsx)(c,{type:i.a})}},137:function(n,t,e){"use strict";e.d(t,"a",(function(){return a})),e.d(t,"b",(function(){return c}));var i=e(2),r=e(5),a=Object(i.b)("client/change-stage",(function(n,t){setTimeout((function(){setTimeout((function(){t.dispatch(r.a.actions.changeStage(n.stage))}),n.ms)}))})),c=Object(i.b)("client/set-sbapshot",(function(n,t){var e=n.snapshot,i=n.nextStage;t.dispatch(r.a.actions.setSnapshot(e)),t.dispatch(a({stage:i,ms:0}))}))},340:function(n,t,e){"use strict";e.r(t);var i,r,a,c,o,u,s,d,h,b=e(44),l=e.n(b),f=e(45),j=e(37),p=e(0),v=function(n){return new Promise((function(t,e){g({video:{facingMode:{exact:"environment"},width:n.height,height:n.width}},(function(n){return t(n)}),(function(n){return e(n)}))}))},g=function(n,t,e){return"getUserMedia"in navigator?navigator.getUserMedia(n,t,e):"webkitGetUserMedia"in navigator?navigator.webkitGetUserMedia(n,t,e):"mozGetUserMedia"in navigator?navigator.mozGetUserMedia(n,t,e):void 0},x=function(){var n=Object(f.a)(l.a.mark((function n(t){var e,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t.video){n.next=2;break}return n.abrupt("return",null);case 2:if(e=document.createElement("canvas"),null!=(i=e.getContext("2d"))){n.next=6;break}return n.abrupt("return",null);case 6:return e.width=t.width,e.height=t.height,i.drawImage(t.video,0,0,t.width,t.height),n.next=11,O(e);case 11:return n.abrupt("return",n.sent);case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),O=function(n){return new Promise((function(t){n.toBlob((function(n){return t(n)}))}))},w=e(136),m=e(10),y=e(11),k=y.b.div(i||(i=Object(m.a)(["\n    position: relative;\n    width: ","px;\n    height: ","px;\n    background-color: black;\n"])),(function(n){return n.width}),(function(n){return n.height})),z=y.b.div(r||(r=Object(m.a)(["\n    color: white;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    pointer-events: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 50px;\n"]))),C=y.b.div(a||(a=Object(m.a)(['\n    width: 100%;\n    position: absolute;\n    bottom: 50px;\n    display: grid;\n\n    grid-template-areas: "left center right";\n']))),S=y.b.div(c||(c=Object(m.a)(["\n    grid-area: left;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n"]))),E=y.b.div(o||(o=Object(m.a)(["\n    grid-area: center;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: ",";\n    pointer-events: ",";\n"])),(function(n){return n.disabled?.5:1}),(function(n){return n.disabled?"none":"auto"})),M=y.b.input(u||(u=Object(m.a)(["\n    display: none;\n"]))),P=e(1),U=function(n){var t=n.height,e=n.width,i=n.takeSnapshotElement,r=n.loadPhotoElement,a=n.onLoadPhoto,c=p.useRef(null),o=function(n){var t=n.height,e=n.width,i=p.useState(),r=Object(j.a)(i,2),a=r[0],c=r[1],o=p.useState(),u=Object(j.a)(o,2),s=u[0],d=u[1];return p.useEffect((function(){v({width:e,height:t}).then((function(n){c(n)})).catch((function(n){console.error(n),d("Camera is not available")}))}),[c,d,e,t]),[a,s]}({height:t,width:e}),u=Object(j.a)(o,2),s=u[0],d=u[1];p.useEffect((function(){c.current&&s&&(c.current.srcObject=s)}),[s]);var h,b=(h={video:c.current,width:e,height:t},p.useCallback((function(){return x(h)}),[h])),g=p.useCallback(Object(f.a)(l.a.mark((function n(){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b();case 2:(t=n.sent)&&a(t);case 4:case"end":return n.stop()}}),n)}))),[b,a]);return Object(P.jsxs)(k,{width:e,height:t,children:[Object(P.jsx)("video",{ref:c,autoPlay:!0}),d&&Object(P.jsx)(z,{children:Object(P.jsx)(w.c,{})}),Object(P.jsxs)(C,{children:[Object(P.jsx)(G,{onLoad:a,children:r}),Object(P.jsx)(E,{onClick:g,disabled:!s||!!d,children:i})]})]})},G=function(n){var t=n.children,e=n.onLoad,i=p.useCallback(function(){var n=Object(f.a)(l.a.mark((function n(t){var i,r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=null===(i=t.currentTarget.files)||void 0===i?void 0:i.item(0))){n.next=9;break}return n.t0=Blob,n.next=5,r.arrayBuffer();case 5:n.t1=n.sent,n.t2=[n.t1],a=new n.t0(n.t2),e(a);case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),[e]);return Object(P.jsxs)(S,{children:[Object(P.jsx)("label",{htmlFor:"photo",children:t}),Object(P.jsx)(M,{type:"file",id:"photo",onChange:i})]})},L=e(137),B=y.b.div(s||(s=Object(m.a)(["\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n"]))),F=y.b.div(d||(d=Object(m.a)(["\n    --size: 70px;\n\n    background-color: white;\n    width: var(--size);\n    height: var(--size);\n    border-radius: calc(var(--size) / 2);\n\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n\n    &:active {\n        opacity: 0.8;\n    }\n"]))),I=y.b.div(h||(h=Object(m.a)(["\n    color: white;\n    font-size: 25px;\n"]))),T=e(114),J=e(3),H=function(){return Object(P.jsx)(F,{})},R=function(){return Object(P.jsx)(I,{children:Object(P.jsx)(w.b,{})})};t.default=function(){var n=Object(J.b)(),t=p.useCallback((function(t){n(Object(L.b)({snapshot:t,nextStage:"prediction"}))}),[n]);return Object(P.jsx)(T.a,{children:Object(P.jsx)(B,{children:Object(P.jsx)(U,{width:window.innerWidth,height:window.innerHeight,takeSnapshotElement:Object(P.jsx)(H,{}),loadPhotoElement:Object(P.jsx)(R,{}),onLoadPhoto:t})})})}}}]);
//# sourceMappingURL=camera.610aec3f.chunk.js.map